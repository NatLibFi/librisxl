/**
 * This file was automatically generated by the TRLD transpiler.
 * Source: trld/trig/parser.py
 */
package trld.trig;

//import javax.annotation.Nullable;
import java.util.*;
import java.util.function.Function;
import java.util.regex.Pattern;
import java.util.stream.Stream;
import java.util.stream.Collectors;
import java.io.*;

import trld.Builtins;
import trld.KeyValue;

import trld.Input;
import static trld.Common.dumpJson;
import static trld.jsonld.Base.VALUE;
import static trld.jsonld.Base.TYPE;
import static trld.jsonld.Base.LANGUAGE;
import static trld.jsonld.Base.ID;
import static trld.jsonld.Base.LIST;
import static trld.jsonld.Base.GRAPH;
import static trld.jsonld.Base.CONTEXT;
import static trld.jsonld.Base.VOCAB;
import static trld.jsonld.Base.BASE;
import static trld.jsonld.Base.PREFIX;
import static trld.jsonld.Base.PREFIX_DELIMS;
import static trld.Rdfterms.RDF_TYPE;
import static trld.Rdfterms.XSD;
import static trld.Rdfterms.XSD_DOUBLE;
import static trld.Rdfterms.XSD_INTEGER;
import static trld.trig.Parser.*;


public class ReadGraph extends ReadNodes { // LINE: 728
  ReadGraph(/*@Nullable*/ ParserState parent) { super(parent); };

  public Map.Entry<ParserState, Object> consume(String c, Object prevValue) { // LINE: 730
    if ((prevValue instanceof String && !prevValue.equals(TYPE))) { // LINE: 731
      throw new NotationError("Directive not allowed in graph: " + prevValue); // LINE: 732
    }
    ReadNodes readnodes = (ReadNodes) ((ReadNodes) this.parent); // LINE: 734
    if ((this.expectGraph || (c == null && ((Object) "{") == null || c != null && (c).equals("{")))) { // LINE: 736
      throw new NotationError("Nested graphs are not allowed in TriG"); // LINE: 737
    }
    if ((c == null && ((Object) "}") == null || c != null && (c).equals("}"))) { // LINE: 739
      if (this.node != null) { // LINE: 740
        if ((this.p != null && prevValue != null)) { // LINE: 741
          this.fillNode(prevValue); // LINE: 742
        }
        this.nextNode(); // LINE: 743
      }
      if (readnodes.node == null) { // LINE: 744
        readnodes.nodes.addAll(this.nodes);
      } else {
        readnodes.node.put(GRAPH, this.nodes); // LINE: 747
        readnodes.nextNode(); // LINE: 748
      }
      return new KeyValue(readnodes, null); // LINE: 749
    } else {
      return super.consume(c, prevValue); // LINE: 751
    }
  }
}
